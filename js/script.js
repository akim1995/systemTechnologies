"use strict";

// for ie to understand forEach on nodeList
(function () {
  if (typeof NodeList.prototype.forEach === "function") return false;else NodeList.prototype.forEach = Array.prototype.forEach;
})();

var filteredData = [];
filteredData.push({
  date: data[0].date.substring(0, 10),
  rows: [data[0]],
  amountForDate: data[0].quantity * data[0].price,
  docs: [{
    docType: data[0].docType,
    id: data[0].id,
    amount: data[0].price * data[0].quantity,
    products: [{
      name: data[0].name,
      image: data[0].image,
      quantity: data[0].quantity,
      price: data[0].price
    }]
  }]
});
data.shift();
data.forEach(function (row) {
  filteredData.forEach(function (day, index) {
    if (day.date == row.date.substring(0, 10)) {
      day.rows.push(row);
      day.amountForDate += row.price * row.quantity;
      day.docs.forEach(function (doc, docIndex) {
        if (doc.id === row.id) {
          doc.amount += row.price * row.quantity;
          doc.products.push({
            name: row.name,
            image: row.image,
            quantity: row.quantity,
            price: row.price
          });
        } // if there is no such document
        else if (docIndex === day.docs.length - 1) {
            day.docs.push({
              docType: row.docType,
              id: row.id,
              amount: row.price * row.quantity,
              products: [{
                name: row.name,
                image: row.image,
                quantity: row.quantity,
                price: row.price
              }]
            });
          }
      });
    } // next day
    else if (index === filteredData.length - 1) {
        filteredData.push({
          date: row.date.substring(0, 10),
          rows: [row],
          amountForDate: row.price * row.quantity,
          docs: [{
            docType: row.docType,
            id: row.id,
            amount: row.price * row.quantity,
            products: [{
              name: row.name,
              image: row.image,
              quantity: row.quantity,
              price: row.price
            }]
          }]
        });
      }
  });
}); // function formatByDoc(row, index) {
// 	result = {
// 	};
// };

Handlebars.registerHelper("formatDate", function (date) {
  var result = '';
  var dateObj = new Date(date);
  var month = getRusMonth(dateObj);
  result += dateObj.getDate();
  result += ' ' + month;

  function getRusMonth(dateObj) {
    var rusMonths = ['Января', 'Февраля', 'Марта', 'Апреля', 'Мая', 'Июня', 'Июля', 'Августа', 'Сентября', 'Октября', 'Ноября', 'Декабря', 'Января', 'Февраля', 'Марта'];
    return rusMonths[dateObj.getMonth()];
  }

  return result;
});
Handlebars.registerHelper("getNumEnding", function (number, one, four, five) {
  var endingArray = [one, four, five];

  function getNumEnding(number, endingArray) {
    var ending;
    number = number % 100;

    if (number >= 11 && number <= 19) {
      ending = endingArray[2];
    } else {
      var i = number % 10;

      switch (i) {
        case 1:
          ending = endingArray[0];
          break;

        case 2:
        case 3:
        case 4:
          ending = endingArray[1];
          break;

        default:
          ending = endingArray[2];
      }
    }

    return ending;
  }

  return getNumEnding(number, endingArray);
});
Handlebars.registerHelper("currencyFormatRu", function (number) {
  function toFixedIfFloat(number, fixedDigits) {
    var result;

    if (number % 1 !== 0) {
      result = number.toFixed(fixedDigits);
    } else {
      result = number;
    }

    return String(result);
  }

  return toFixedIfFloat(number, 2).replace('.', ',').replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1 ') + ' ₽';
});
Handlebars.registerHelper("MultiplyTwoNumbers", function (a, b) {
  return a * b;
});
Handlebars.registerHelper("getImageDiv", function (pic) {
  if (pic) {
    return new Handlebars.SafeString("<div class=\"products-list__img\" style=\"background-image:url('".concat(pic, "')\"></div>"));
  } else {
    return new Handlebars.SafeString('<div class="products-list__img products-list__img--no-pic" style="background-image:url(\'assets/img/no_image.png\')"></div>');
  }
});
var appTemplate = document.getElementById('appTemplate').innerHTML;
var compiledTemplate = Handlebars.compile(appTemplate);
document.querySelector('#app').innerHTML = compiledTemplate({
  data: filteredData
}); // UI JavaScript
// SETING COLLAPSING FOR DIFFERENT DATES

var dayHeaders = document.querySelectorAll('.docs-head');
dayHeaders.forEach(function (el) {
  var docContents = el.nextElementSibling;

  if (!el.parentElement.classList.contains('collapsed')) {
    collapseDay();
  }

  el.addEventListener('click', function (e) {
    this.parentElement.classList.toggle('collapsed');
    collapseDay();
  });

  function collapseDay() {
    if (docContents.style.maxHeight) {
      docContents.style.maxHeight = null;
    } else {
      docContents.style.maxHeight = docContents.scrollHeight + 'px';
    }
  }
}); // Setting collapsing for different docs
// you can add an upgrade like in the example before so docs can be 
// without collapsed class on startup

var documentHeaders = document.querySelectorAll('.document-header');
documentHeaders.forEach(function (el) {
  var dayListParent = el.parentElement.parentElement;
  var docContents = el.nextElementSibling;
  el.addEventListener('click', function () {
    el.classList.toggle('collapsed');
    el.firstElementChild.classList.toggle('arrow--up');

    if (docContents.style.maxHeight) {
      var computedHeight = Number(dayListParent.style.maxHeight.replace('px', '')) - docContents.scrollHeight + 'px'; //upadting day-list max height

      dayListParent.style.maxHeight = computedHeight;
      docContents.style.maxHeight = null;
    } else {
      var _computedHeight = Number(dayListParent.style.maxHeight.replace('px', '')) + docContents.scrollHeight + 'px'; //upadting day-list max height


      dayListParent.style.maxHeight = _computedHeight; //giving max height to producsts list

      docContents.style.maxHeight = docContents.scrollHeight + 'px';
    }
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJOb2RlTGlzdCIsInByb3RvdHlwZSIsImZvckVhY2giLCJBcnJheSIsImZpbHRlcmVkRGF0YSIsInB1c2giLCJkYXRlIiwiZGF0YSIsInN1YnN0cmluZyIsInJvd3MiLCJhbW91bnRGb3JEYXRlIiwicXVhbnRpdHkiLCJwcmljZSIsImRvY3MiLCJkb2NUeXBlIiwiaWQiLCJhbW91bnQiLCJwcm9kdWN0cyIsIm5hbWUiLCJpbWFnZSIsInNoaWZ0Iiwicm93IiwiZGF5IiwiaW5kZXgiLCJkb2MiLCJkb2NJbmRleCIsImxlbmd0aCIsIkhhbmRsZWJhcnMiLCJyZWdpc3RlckhlbHBlciIsInJlc3VsdCIsImRhdGVPYmoiLCJEYXRlIiwibW9udGgiLCJnZXRSdXNNb250aCIsImdldERhdGUiLCJydXNNb250aHMiLCJnZXRNb250aCIsIm51bWJlciIsIm9uZSIsImZvdXIiLCJmaXZlIiwiZW5kaW5nQXJyYXkiLCJnZXROdW1FbmRpbmciLCJlbmRpbmciLCJpIiwidG9GaXhlZElmRmxvYXQiLCJmaXhlZERpZ2l0cyIsInRvRml4ZWQiLCJTdHJpbmciLCJyZXBsYWNlIiwiYSIsImIiLCJwaWMiLCJTYWZlU3RyaW5nIiwiYXBwVGVtcGxhdGUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwiY29tcGlsZWRUZW1wbGF0ZSIsImNvbXBpbGUiLCJxdWVyeVNlbGVjdG9yIiwiZGF5SGVhZGVycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbCIsImRvY0NvbnRlbnRzIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwicGFyZW50RWxlbWVudCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiY29sbGFwc2VEYXkiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRvZ2dsZSIsInN0eWxlIiwibWF4SGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwiZG9jdW1lbnRIZWFkZXJzIiwiZGF5TGlzdFBhcmVudCIsImZpcnN0RWxlbWVudENoaWxk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QixDQUErQkssTUFBL0IsQ0FBc0MsV0FBdEM7O0FBQ0EsUUFBR1IsV0FBVyxDQUFDUyxLQUFaLENBQWtCQyxTQUFyQixFQUFnQztBQUMvQixVQUFJSyxjQUFjLEdBQUdDLE1BQU0sQ0FBQ0gsYUFBYSxDQUFDSixLQUFkLENBQW9CQyxTQUFwQixDQUE4QnpCLE9BQTlCLENBQXNDLElBQXRDLEVBQTRDLEVBQTVDLENBQUQsQ0FBTixHQUNuQmUsV0FBVyxDQUFDVyxZQURPLEdBQ1EsSUFEN0IsQ0FEK0IsQ0FHL0I7O0FBQ0FFLE1BQUFBLGFBQWEsQ0FBQ0osS0FBZCxDQUFvQkMsU0FBcEIsR0FBZ0NLLGNBQWhDO0FBQ0FmLE1BQUFBLFdBQVcsQ0FBQ1MsS0FBWixDQUFrQkMsU0FBbEIsR0FBOEIsSUFBOUI7QUFDQSxLQU5ELE1BTU87QUFDTixVQUFJSyxlQUFjLEdBQUdDLE1BQU0sQ0FBQ0gsYUFBYSxDQUFDSixLQUFkLENBQW9CQyxTQUFwQixDQUE4QnpCLE9BQTlCLENBQXNDLElBQXRDLEVBQTRDLEVBQTVDLENBQUQsQ0FBTixHQUNuQmUsV0FBVyxDQUFDVyxZQURPLEdBQ1EsSUFEN0IsQ0FETSxDQUlOOzs7QUFDQUUsTUFBQUEsYUFBYSxDQUFDSixLQUFkLENBQW9CQyxTQUFwQixHQUFnQ0ssZUFBaEMsQ0FMTSxDQU9OOztBQUNBZixNQUFBQSxXQUFXLENBQUNTLEtBQVosQ0FBa0JDLFNBQWxCLEdBQThCVixXQUFXLENBQUNXLFlBQVosR0FBMkIsSUFBekQ7QUFDQTtBQUVELEdBcEJEO0FBd0JBLENBM0JEIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZm9yIGllIHRvIHVuZGVyc3RhbmQgZm9yRWFjaCBvbiBub2RlTGlzdFxuKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIE5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoID09PSBcImZ1bmN0aW9uXCIpXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHRlbHNlXG5cdFx0Tm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2ggPSBBcnJheS5wcm90b3R5cGUuZm9yRWFjaDtcbn0pKCk7XG5cbmxldCBmaWx0ZXJlZERhdGEgPSBbXTtcblxuXG5maWx0ZXJlZERhdGEucHVzaChcblx0e2RhdGU6IGRhdGFbMF0uZGF0ZS5zdWJzdHJpbmcoMCwxMCksIHJvd3M6IFtkYXRhWzBdXSxcblx0XHRhbW91bnRGb3JEYXRlOiBkYXRhWzBdLnF1YW50aXR5ICogZGF0YVswXS5wcmljZSxcblx0XHRkb2NzOiBbXG5cdFx0XHR7XG5cdFx0XHRcdGRvY1R5cGU6IGRhdGFbMF0uZG9jVHlwZSxcblx0XHRcdFx0aWQ6IGRhdGFbMF0uaWQsXG5cdFx0XHRcdGFtb3VudDogZGF0YVswXS5wcmljZSAqIGRhdGFbMF0ucXVhbnRpdHksXG5cdFx0XHRcdHByb2R1Y3RzOiBbXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bmFtZTogZGF0YVswXS5uYW1lLFxuXHRcdFx0XHRcdFx0aW1hZ2U6IGRhdGFbMF0uaW1hZ2UsXG5cdFx0XHRcdFx0XHRxdWFudGl0eTogZGF0YVswXS5xdWFudGl0eSxcblx0XHRcdFx0XHRcdHByaWNlOiBkYXRhWzBdLnByaWNlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRdXG5cdFx0XHRcdFxuXHRcdFx0fVxuXHRcdF1cblx0fSk7XG5kYXRhLnNoaWZ0KCk7XG5cbmRhdGEuZm9yRWFjaCgocm93KSA9PiB7XG5cdGZpbHRlcmVkRGF0YS5mb3JFYWNoKChkYXksIGluZGV4KSA9PiB7XG5cdFx0aWYgKGRheS5kYXRlID09IHJvdy5kYXRlLnN1YnN0cmluZygwLDEwKSkge1xuXHRcdFx0ZGF5LnJvd3MucHVzaChyb3cpO1xuXHRcdFx0ZGF5LmFtb3VudEZvckRhdGUgKz0gcm93LnByaWNlICogcm93LnF1YW50aXR5O1xuXHRcdFx0ZGF5LmRvY3MuZm9yRWFjaCgoZG9jLCBkb2NJbmRleCkgPT4ge1xuXHRcdFx0XHRpZihkb2MuaWQgPT09IHJvdy5pZCkge1xuXHRcdFx0XHRcdGRvYy5hbW91bnQgKz0gcm93LnByaWNlICogcm93LnF1YW50aXR5O1xuXHRcdFx0XHRcdGRvYy5wcm9kdWN0cy5wdXNoKHtcblx0XHRcdFx0XHRcdG5hbWU6IHJvdy5uYW1lLFxuXHRcdFx0XHRcdFx0aW1hZ2U6IHJvdy5pbWFnZSxcblx0XHRcdFx0XHRcdHF1YW50aXR5OiByb3cucXVhbnRpdHksXG5cdFx0XHRcdFx0XHRwcmljZTogcm93LnByaWNlXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gaWYgdGhlcmUgaXMgbm8gc3VjaCBkb2N1bWVudFxuXHRcdFx0XHRlbHNlIGlmKGRvY0luZGV4ID09PSBkYXkuZG9jcy5sZW5ndGggLTEpIHtcblxuXHRcdFx0XHRcdGRheS5kb2NzLnB1c2goe1xuXHRcdFx0XHRcdFx0ZG9jVHlwZTogcm93LmRvY1R5cGUsXG5cdFx0XHRcdFx0XHRpZDogcm93LmlkLFxuXHRcdFx0XHRcdFx0YW1vdW50OiByb3cucHJpY2UgKiByb3cucXVhbnRpdHksXG5cdFx0XHRcdFx0XHRwcm9kdWN0czogW3tcblx0XHRcdFx0XHRcdFx0bmFtZTogcm93Lm5hbWUsXG5cdFx0XHRcdFx0XHRcdGltYWdlOiByb3cuaW1hZ2UsXG5cdFx0XHRcdFx0XHRcdHF1YW50aXR5OiByb3cucXVhbnRpdHksXG5cdFx0XHRcdFx0XHRcdHByaWNlOiByb3cucHJpY2Vcblx0XHRcdFx0XHRcdH1dXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblxuXHRcdH1cblx0XHQvLyBuZXh0IGRheVxuXHRcdGVsc2UgaWYgKGluZGV4ID09PSBmaWx0ZXJlZERhdGEubGVuZ3RoIC0xICkge1xuXHRcdFx0ZmlsdGVyZWREYXRhLnB1c2goe2RhdGU6IHJvdy5kYXRlLnN1YnN0cmluZygwLDEwKSwgcm93czogW3Jvd10sXG5cdFx0XHRcdGFtb3VudEZvckRhdGU6IHJvdy5wcmljZSAqIHJvdy5xdWFudGl0eSxcblx0XHRcdFx0ZG9jczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZG9jVHlwZTogcm93LmRvY1R5cGUsXG5cdFx0XHRcdFx0aWQ6IHJvdy5pZCxcblx0XHRcdFx0XHRhbW91bnQ6IHJvdy5wcmljZSAqIHJvdy5xdWFudGl0eSxcblx0XHRcdFx0XHRwcm9kdWN0czogW3tcblx0XHRcdFx0XHRcdG5hbWU6IHJvdy5uYW1lLFxuXHRcdFx0XHRcdFx0aW1hZ2U6IHJvdy5pbWFnZSxcblx0XHRcdFx0XHRcdHF1YW50aXR5OiByb3cucXVhbnRpdHksXG5cdFx0XHRcdFx0XHRwcmljZTogcm93LnByaWNlXG5cdFx0XHRcdFx0fV1cblx0XHRcdFx0fVxuXHRcdFx0XX0pO1xuXHRcdH1cblx0fSk7XG59KTtcblxuXG4vLyBmdW5jdGlvbiBmb3JtYXRCeURvYyhyb3csIGluZGV4KSB7XG4vLyBcdHJlc3VsdCA9IHtcblx0XHRcbi8vIFx0fTtcbi8vIH07XG5cbkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoXCJmb3JtYXREYXRlXCIsIGZ1bmN0aW9uKGRhdGUpIHtcblx0bGV0IHJlc3VsdCA9ICcnO1xuXHRsZXQgZGF0ZU9iaiA9IG5ldyBEYXRlKGRhdGUpO1xuXHRsZXQgbW9udGggPSBnZXRSdXNNb250aChkYXRlT2JqKTtcblx0cmVzdWx0ICs9IGRhdGVPYmouZ2V0RGF0ZSgpO1xuXHRyZXN1bHQgKz0gJyAnICsgbW9udGg7XG5cblx0ZnVuY3Rpb24gZ2V0UnVzTW9udGgoZGF0ZU9iaikge1xuXHRcdFx0bGV0IHJ1c01vbnRocyA9IFtcblx0XHRcdFx0J9Cv0L3QstCw0YDRjycsXG5cdFx0XHRcdCfQpNC10LLRgNCw0LvRjycsXG5cdFx0XHRcdCfQnNCw0YDRgtCwJyxcblx0XHRcdFx0J9CQ0L/RgNC10LvRjycsXG5cdFx0XHRcdCfQnNCw0Y8nLFxuXHRcdFx0XHQn0JjRjtC90Y8nLFxuXHRcdFx0XHQn0JjRjtC70Y8nLFxuXHRcdFx0XHQn0JDQstCz0YPRgdGC0LAnLFxuXHRcdFx0XHQn0KHQtdC90YLRj9Cx0YDRjycsXG5cdFx0XHRcdCfQntC60YLRj9Cx0YDRjycsXG5cdFx0XHRcdCfQndC+0Y/QsdGA0Y8nLFxuXHRcdFx0XHQn0JTQtdC60LDQsdGA0Y8nLFxuXHRcdFx0XHQn0K/QvdCy0LDRgNGPJyxcblx0XHRcdFx0J9Ck0LXQstGA0LDQu9GPJyxcblx0XHRcdFx0J9Cc0LDRgNGC0LAnXG5cdFx0XHRdO1xuXHRcdHJldHVybiBydXNNb250aHNbZGF0ZU9iai5nZXRNb250aCgpXTtcblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufSk7XG5cblxuXG5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKFwiZ2V0TnVtRW5kaW5nXCIsIGZ1bmN0aW9uKG51bWJlciwgb25lLCBmb3VyLCBmaXZlKSB7XG5sZXQgZW5kaW5nQXJyYXkgPSBbb25lLCBmb3VyLCBmaXZlXTtcblxuXHRmdW5jdGlvbiBnZXROdW1FbmRpbmcobnVtYmVyLCBlbmRpbmdBcnJheSlcblx0e1xuXHRcdGxldCBlbmRpbmc7XG5cdFx0bnVtYmVyID0gbnVtYmVyICUgMTAwO1xuXHRcdGlmIChudW1iZXI+PTExICYmIG51bWJlcjw9MTkpIHtcblx0XHRcdGVuZGluZz1lbmRpbmdBcnJheVsyXTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRsZXQgaSA9IG51bWJlciAlIDEwO1xuXHRcdFx0c3dpdGNoIChpKVxuXHRcdFx0e1xuXHRcdFx0XHRjYXNlIDE6IGVuZGluZyA9IGVuZGluZ0FycmF5WzBdOyBicmVhaztcblx0XHRcdFx0Y2FzZSAyOlxuXHRcdFx0XHRjYXNlIDM6XG5cdFx0XHRcdGNhc2UgNDogZW5kaW5nID0gZW5kaW5nQXJyYXlbMV07IGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OiBlbmRpbmc9ZW5kaW5nQXJyYXlbMl07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBlbmRpbmc7XG5cdH1cblxuXHRyZXR1cm4gZ2V0TnVtRW5kaW5nKG51bWJlciwgZW5kaW5nQXJyYXkpO1xufSk7XG5cblxuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcImN1cnJlbmN5Rm9ybWF0UnVcIiwgZnVuY3Rpb24obnVtYmVyKSB7XG5cdGZ1bmN0aW9uIHRvRml4ZWRJZkZsb2F0KG51bWJlciwgZml4ZWREaWdpdHMpIHtcblx0XHRsZXQgcmVzdWx0O1xuXHRcdGlmIChudW1iZXIgJSAxICE9PSAwKSB7XG5cdFx0XHRyZXN1bHQgPSBudW1iZXIudG9GaXhlZChmaXhlZERpZ2l0cyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc3VsdCA9IG51bWJlcjtcblx0XHR9XG5cdFx0cmV0dXJuIFN0cmluZyhyZXN1bHQpO1xuXHR9XG5cdHJldHVybiAoXG5cdCAgICB0b0ZpeGVkSWZGbG9hdChudW1iZXIsIDIpXG5cdCAgICAgIC5yZXBsYWNlKCcuJywgJywnKVxuXHQgICAgICAucmVwbGFjZSgvKFxcZCkoPz0oXFxkezN9KSsoPyFcXGQpKS9nLCAnJDEgJykgKyAnIOKCvSdcblx0ICApXG59KTtcblxuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcIk11bHRpcGx5VHdvTnVtYmVyc1wiLCBmdW5jdGlvbihhLCBiKSB7XG5cdHJldHVybiBhICogYjtcbn0pO1xuXG5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKFwiZ2V0SW1hZ2VEaXZcIiwgZnVuY3Rpb24ocGljKSB7XG4gICAgaWYocGljKSB7XG5cdFx0XHRyZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhcblx0XHRcdFx0YDxkaXYgY2xhc3M9XCJwcm9kdWN0cy1saXN0X19pbWdcIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6dXJsKCcke3BpY30nKVwiPjwvZGl2PmBcblx0XHRcdCAgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoXG5cdFx0XHRcdCc8ZGl2IGNsYXNzPVwicHJvZHVjdHMtbGlzdF9faW1nIHByb2R1Y3RzLWxpc3RfX2ltZy0tbm8tcGljXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOnVybChcXCdhc3NldHMvaW1nL25vX2ltYWdlLnBuZ1xcJylcIj48L2Rpdj4nXG5cdFx0XHQpO1xuXHRcdH1cblxufSk7XG5cblxubGV0IGFwcFRlbXBsYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcFRlbXBsYXRlJykuaW5uZXJIVE1MO1xuXG5sZXQgY29tcGlsZWRUZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShhcHBUZW1wbGF0ZSk7XG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXBwJykuaW5uZXJIVE1MID0gY29tcGlsZWRUZW1wbGF0ZSh7ZGF0YTpmaWx0ZXJlZERhdGF9KTtcblxuXG4vLyBVSSBKYXZhU2NyaXB0XG5cbi8vIFNFVElORyBDT0xMQVBTSU5HIEZPUiBESUZGRVJFTlQgREFURVNcbmxldCBkYXlIZWFkZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRvY3MtaGVhZCcpO1xuZGF5SGVhZGVycy5mb3JFYWNoKChlbCkgPT4ge1xuXHRsZXQgZG9jQ29udGVudHMgPSBlbC5uZXh0RWxlbWVudFNpYmxpbmc7XG5cdGlmKCFlbC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnY29sbGFwc2VkJykpIHtcblx0XHRjb2xsYXBzZURheSgpO1xuXHR9XG5cdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSl7XG5cdFx0XHR0aGlzLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnY29sbGFwc2VkJyk7XG5cdFx0XHRjb2xsYXBzZURheSgpO1xuXHR9KTtcblx0ZnVuY3Rpb24gY29sbGFwc2VEYXkoKSB7XG5cdFx0aWYoZG9jQ29udGVudHMuc3R5bGUubWF4SGVpZ2h0KSB7XG5cdFx0XHRkb2NDb250ZW50cy5zdHlsZS5tYXhIZWlnaHQgPSBudWxsO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkb2NDb250ZW50cy5zdHlsZS5tYXhIZWlnaHQgPSBkb2NDb250ZW50cy5zY3JvbGxIZWlnaHQgKyAncHgnO1xuXHRcdH1cblx0fVxuXG59KTtcblxuXG5cblxuXG4vLyBTZXR0aW5nIGNvbGxhcHNpbmcgZm9yIGRpZmZlcmVudCBkb2NzXG4vLyB5b3UgY2FuIGFkZCBhbiB1cGdyYWRlIGxpa2UgaW4gdGhlIGV4YW1wbGUgYmVmb3JlIHNvIGRvY3MgY2FuIGJlIFxuLy8gd2l0aG91dCBjb2xsYXBzZWQgY2xhc3Mgb24gc3RhcnR1cFxubGV0IGRvY3VtZW50SGVhZGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kb2N1bWVudC1oZWFkZXInKTtcbmRvY3VtZW50SGVhZGVycy5mb3JFYWNoKGVsID0+IHtcblx0bGV0IGRheUxpc3RQYXJlbnQgPSBlbC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG5cdGxldCBkb2NDb250ZW50cyA9IGVsLm5leHRFbGVtZW50U2libGluZztcblx0ZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRlbC5jbGFzc0xpc3QudG9nZ2xlKCdjb2xsYXBzZWQnKTtcblx0XHRlbC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QudG9nZ2xlKCdhcnJvdy0tdXAnKTtcblx0XHRpZihkb2NDb250ZW50cy5zdHlsZS5tYXhIZWlnaHQpIHtcblx0XHRcdGxldCBjb21wdXRlZEhlaWdodCA9IE51bWJlcihkYXlMaXN0UGFyZW50LnN0eWxlLm1heEhlaWdodC5yZXBsYWNlKCdweCcsICcnKSlcblx0XHRcdC0gZG9jQ29udGVudHMuc2Nyb2xsSGVpZ2h0ICsgJ3B4Jztcblx0XHRcdC8vdXBhZHRpbmcgZGF5LWxpc3QgbWF4IGhlaWdodFxuXHRcdFx0ZGF5TGlzdFBhcmVudC5zdHlsZS5tYXhIZWlnaHQgPSBjb21wdXRlZEhlaWdodDtcblx0XHRcdGRvY0NvbnRlbnRzLnN0eWxlLm1heEhlaWdodCA9IG51bGw7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGxldCBjb21wdXRlZEhlaWdodCA9IE51bWJlcihkYXlMaXN0UGFyZW50LnN0eWxlLm1heEhlaWdodC5yZXBsYWNlKCdweCcsICcnKSlcblx0XHRcdCsgZG9jQ29udGVudHMuc2Nyb2xsSGVpZ2h0ICsgJ3B4JztcblxuXHRcdFx0Ly91cGFkdGluZyBkYXktbGlzdCBtYXggaGVpZ2h0XG5cdFx0XHRkYXlMaXN0UGFyZW50LnN0eWxlLm1heEhlaWdodCA9IGNvbXB1dGVkSGVpZ2h0O1xuXG5cdFx0XHQvL2dpdmluZyBtYXggaGVpZ2h0IHRvIHByb2R1Y3N0cyBsaXN0XG5cdFx0XHRkb2NDb250ZW50cy5zdHlsZS5tYXhIZWlnaHQgPSBkb2NDb250ZW50cy5zY3JvbGxIZWlnaHQgKyAncHgnO1xuXHRcdH1cblxuXHR9KTtcblxuXG5cbn0pO1xuXG5cbiJdLCJmaWxlIjoic2NyaXB0LmpzIn0=
