"use strict";var filteredData=[];filteredData.push({date:data[0].date.substring(0,10),rows:[data[0]],amountForDate:data[0].quantity*data[0].price,docs:[{docType:data[0].docType,id:data[0].id,amount:data[0].price*data[0].quantity,products:[{name:data[0].name,image:data[0].image,quantity:data[0].quantity,price:data[0].price}]}]}),data.shift(),data.forEach(function(i){filteredData.forEach(function(a,e){a.date==i.date.substring(0,10)?(a.rows.push(i),a.amountForDate+=i.price*i.quantity,a.docs.forEach(function(e,t){e.id===i.id?(e.amount+=i.price*i.quantity,e.products.push({name:i.name,image:i.image,quantity:i.quantity,price:i.price})):t===a.docs.length-1&&a.docs.push({docType:i.docType,id:i.id,amount:i.price*i.quantity,products:[{name:i.name,image:i.image,quantity:i.quantity,price:i.price}]})})):e===filteredData.length-1&&filteredData.push({date:i.date.substring(0,10),rows:[i],amountForDate:i.price*i.quantity,docs:[{docType:i.docType,id:i.id,amount:i.price*i.quantity,products:[{name:i.name,image:i.image,quantity:i.quantity,price:i.price}]}]})})}),Handlebars.registerHelper("formatDate",function(e){var t="",a=new Date(e),i=["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря","Января","Февраля","Марта"][a.getMonth()];return t+=a.getDate(),t+=" "+i}),Handlebars.registerHelper("currencyFormatRu",function(e){return(t=e,a=2,i=t%1!=0?t.toFixed(a):t,String(i)).replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")+" ₽";var t,a,i}),Handlebars.registerHelper("MultiplyTwoNumbers",function(e,t){return e*t}),Handlebars.registerHelper("getImageDiv",function(e){return e?new Handlebars.SafeString('<div class="products-list__img" style="background-image:url(\''.concat(e,"')\"></div>")):new Handlebars.SafeString('<div class="products-list__img products-list__img--no-pic" style="background-image:url(\'assets/img/no_image.png\')"></div>')});var appTemplate=document.getElementById("appTemplate").innerHTML,compiledTemplate=Handlebars.compile(appTemplate);document.querySelector("#app").innerHTML=compiledTemplate({data:filteredData});var dayHeaders=document.querySelectorAll(".docs-head");dayHeaders.forEach(function(e){var t=e.nextElementSibling;function a(){t.style.maxHeight?t.style.maxHeight=null:t.style.maxHeight=t.scrollHeight+"px"}e.parentElement.classList.contains("collapsed")||a(),e.addEventListener("click",function(e){this.parentElement.classList.toggle("collapsed"),a()})});var documentHeaders=document.querySelectorAll(".document-header");documentHeaders.forEach(function(a){var i=a.parentElement.parentElement,r=a.nextElementSibling;a.addEventListener("click",function(){if(a.classList.toggle("collapsed"),a.firstElementChild.classList.toggle("arrow--up"),r.style.maxHeight){var e=Number(i.style.maxHeight.replace("px",""))-r.scrollHeight+"px";i.style.maxHeight=e,r.style.maxHeight=null}else{var t=Number(i.style.maxHeight.replace("px",""))+r.scrollHeight+"px";i.style.maxHeight=t,r.style.maxHeight=r.scrollHeight+"px"}})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJmaWx0ZXJlZERhdGEiLCJkYXRlIiwiZGF0YSIsInN1YnN0cmluZyIsInJvd3MiLCJxdWFudGl0eSIsInByaWNlIiwiYW1vdW50Rm9yRGF0ZSIsImRvY1R5cGUiLCJkb2NzIiwiaWQiLCJhbW91bnQiLCJwcm9kdWN0cyIsIm5hbWUiLCJpbWFnZSIsImRheSIsInJvdyIsImZvckVhY2giLCJkb2NJbmRleCIsImRvYyIsInB1c2giLCJIYW5kbGViYXJzIiwicmVnaXN0ZXJIZWxwZXIiLCJyZXN1bHQiLCJkYXRlT2JqIiwiRGF0ZSIsIm51bWJlciIsIlNhZmVTdHJpbmciLCJ0b0ZpeGVkSWZGbG9hdCIsIm1vbnRoIiwiZml4ZWREaWdpdHMiLCJkYXlIZWFkZXJzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZG9jQ29udGVudHMiLCJTdHJpbmciLCJwYXJlbnRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlcGxhY2UiLCJjb2xsYXBzZURheSIsImEiLCJiIiwibWF4SGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwicGljIiwiY29uY2F0IiwiZG9jdW1lbnRIZWFkZXJzIiwiYXBwVGVtcGxhdGUiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsImNvbXBpbGVkVGVtcGxhdGUiLCJjb21wdXRlZEhlaWdodCIsImRheUxpc3RQYXJlbnQiLCJxdWVyeVNlbGVjdG9yIiwic3R5bGUiLCJlbCIsIm5leHRFbGVtZW50U2libGluZyIsImUiLCJ0aGlzIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJOdW1iZXIiXSwibWFwcGluZ3MiOiJhQUFBLElBQUlBLGFBQWUsR0FBbkJBLGFBQUlBLEtBR0gsQ0FBQ0MsS0FBTUMsS0FBSyxHQUFHRCxLQUFLRSxVQUFVLEVBQUUsSUFBS0MsS0FBTSxDQUFDRixLQUFLLElBRGxERixjQUFBRSxLQUNDLEdBQUFHLFNBQUFILEtBQUEsR0FBQUksTUFB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QUNoRCxLQUFLRixlQU1sRSxJQUFJK0IsV0FBYUMsU0FBU0MsaUJBQWlCLGNBNkN4Q21CLFdBQUFBLFFBQWEsU0FBQ0UsR0EzQ2hCLElBQUlwQixFQUFjcUIsRUFBR0MsbUJBUXJCLFNBQVNqQixJQUNMTCxFQUFZb0IsTUFBTVosVUFDcEJSLEVBQVlvQixNQUFNWixVQUFZLEtBRTlCUixFQUFZb0IsTUFBTVosVUFBWVIsRUFBWVMsYUFBZSxLQWtDekRULEVBQUFBLGNBQVlvQixVQUFNWixTQUFZUixjQUM5QkssSUFyQkhnQixFQUFBbEIsaUJBQUEsUUFBQSxTQUFBb0IsR0FyQkdDLEtBQUt0QixjQUFjdUIsVUFBVUMsT0FBTyxhQUNwQ3JCLFFBbUJILElBQUlPLGdCQUFrQmQsU0FBU0MsaUJBQWlCLG9CQUNoRGEsZ0JBQWdCN0IsUUFBUSxTQUFBc0MsR0FDdkIsSUFBSUgsRUFBZ0JHLEVBQUduQixjQUFjQSxjQUNqQ0YsRUFBY3FCLEVBQUdDLG1CQUNyQkQsRUFBR2xCLGlCQUFpQixRQUFTLFdBRzVCLEdBRkFrQixFQUFHSSxVQUFVQyxPQUFPLGFBQ3BCTCxFQUFHTSxrQkFBa0JGLFVBQVVDLE9BQU8sYUFDbkMxQixFQUFZb0IsTUFBTVosVUFBVyxDQUMvQixJQUFJUyxFQUFpQlcsT0FBT1YsRUFBY0UsTUFBTVosVUFBVUosUUFBUSxLQUFNLEtBQ3RFSixFQUFZUyxhQUFlLEtBRTdCUyxFQUFjRSxNQUFNWixVQUFZUyxFQUNoQ2pCLEVBQVlvQixNQUFNWixVQUFZLFNBQ3hCLENBQ04sSUFBSVMsRUFBaUJXLE9BQU9WLEVBQWNFLE1BQU1aLFVBQVVKLFFBQVEsS0FBTSxLQUN0RUosRUFBWVMsYUFBZSxLQUc3QlMsRUFBY0UsTUFBTVosVUFBWVMsRUFHaENqQixFQUFZb0IsTUFBTVosVUFBWVIsRUFBWVMsYUFBZSIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgZmlsdGVyZWREYXRhID0gW107XG4vLyBjb25zb2xlLmxvZyhmaWx0ZXJlZERhdGEpO1xuZmlsdGVyZWREYXRhLnB1c2goXG5cdHtkYXRlOiBkYXRhWzBdLmRhdGUuc3Vic3RyaW5nKDAsMTApLCByb3dzOiBbZGF0YVswXV0sXG5cdFx0YW1vdW50Rm9yRGF0ZTogZGF0YVswXS5xdWFudGl0eSAqIGRhdGFbMF0ucHJpY2UsXG5cdFx0ZG9jczogW1xuXHRcdFx0e1xuXHRcdFx0XHRkb2NUeXBlOiBkYXRhWzBdLmRvY1R5cGUsXG5cdFx0XHRcdGlkOiBkYXRhWzBdLmlkLFxuXHRcdFx0XHRhbW91bnQ6IGRhdGFbMF0ucHJpY2UgKiBkYXRhWzBdLnF1YW50aXR5LFxuXHRcdFx0XHRwcm9kdWN0czogW1xuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5hbWU6IGRhdGFbMF0ubmFtZSxcblx0XHRcdFx0XHRcdGltYWdlOiBkYXRhWzBdLmltYWdlLFxuXHRcdFx0XHRcdFx0cXVhbnRpdHk6IGRhdGFbMF0ucXVhbnRpdHksXG5cdFx0XHRcdFx0XHRwcmljZTogZGF0YVswXS5wcmljZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XVxuXHRcdFx0XHRcblx0XHRcdH1cblx0XHRdXG5cdH0pO1xuZGF0YS5zaGlmdCgpO1xuXG5kYXRhLmZvckVhY2goKHJvdykgPT4ge1xuXHRmaWx0ZXJlZERhdGEuZm9yRWFjaCgoZGF5LCBpbmRleCkgPT4ge1xuXHRcdGlmIChkYXkuZGF0ZSA9PSByb3cuZGF0ZS5zdWJzdHJpbmcoMCwxMCkpIHtcblx0XHRcdGRheS5yb3dzLnB1c2gocm93KTtcblx0XHRcdGRheS5hbW91bnRGb3JEYXRlICs9IHJvdy5wcmljZSAqIHJvdy5xdWFudGl0eTtcblx0XHRcdGRheS5kb2NzLmZvckVhY2goKGRvYywgZG9jSW5kZXgpID0+IHtcblx0XHRcdFx0aWYoZG9jLmlkID09PSByb3cuaWQpIHtcblx0XHRcdFx0XHRkb2MuYW1vdW50ICs9IHJvdy5wcmljZSAqIHJvdy5xdWFudGl0eTtcblx0XHRcdFx0XHRkb2MucHJvZHVjdHMucHVzaCh7XG5cdFx0XHRcdFx0XHRuYW1lOiByb3cubmFtZSxcblx0XHRcdFx0XHRcdGltYWdlOiByb3cuaW1hZ2UsXG5cdFx0XHRcdFx0XHRxdWFudGl0eTogcm93LnF1YW50aXR5LFxuXHRcdFx0XHRcdFx0cHJpY2U6IHJvdy5wcmljZVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIGlmIHRoZXJlIGlzIG5vIHN1Y2ggZG9jdW1lbnRcblx0XHRcdFx0ZWxzZSBpZihkb2NJbmRleCA9PT0gZGF5LmRvY3MubGVuZ3RoIC0xKSB7XG5cblx0XHRcdFx0XHRkYXkuZG9jcy5wdXNoKHtcblx0XHRcdFx0XHRcdGRvY1R5cGU6IHJvdy5kb2NUeXBlLFxuXHRcdFx0XHRcdFx0aWQ6IHJvdy5pZCxcblx0XHRcdFx0XHRcdGFtb3VudDogcm93LnByaWNlICogcm93LnF1YW50aXR5LFxuXHRcdFx0XHRcdFx0cHJvZHVjdHM6IFt7XG5cdFx0XHRcdFx0XHRcdG5hbWU6IHJvdy5uYW1lLFxuXHRcdFx0XHRcdFx0XHRpbWFnZTogcm93LmltYWdlLFxuXHRcdFx0XHRcdFx0XHRxdWFudGl0eTogcm93LnF1YW50aXR5LFxuXHRcdFx0XHRcdFx0XHRwcmljZTogcm93LnByaWNlXG5cdFx0XHRcdFx0XHR9XVxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cblx0XHR9XG5cdFx0Ly8gbmV4dCBkYXlcblx0XHRlbHNlIGlmIChpbmRleCA9PT0gZmlsdGVyZWREYXRhLmxlbmd0aCAtMSApIHtcblx0XHRcdGZpbHRlcmVkRGF0YS5wdXNoKHtkYXRlOiByb3cuZGF0ZS5zdWJzdHJpbmcoMCwxMCksIHJvd3M6IFtyb3ddLFxuXHRcdFx0XHRhbW91bnRGb3JEYXRlOiByb3cucHJpY2UgKiByb3cucXVhbnRpdHksXG5cdFx0XHRcdGRvY3M6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGRvY1R5cGU6IHJvdy5kb2NUeXBlLFxuXHRcdFx0XHRcdGlkOiByb3cuaWQsXG5cdFx0XHRcdFx0YW1vdW50OiByb3cucHJpY2UgKiByb3cucXVhbnRpdHksXG5cdFx0XHRcdFx0cHJvZHVjdHM6IFt7XG5cdFx0XHRcdFx0XHRuYW1lOiByb3cubmFtZSxcblx0XHRcdFx0XHRcdGltYWdlOiByb3cuaW1hZ2UsXG5cdFx0XHRcdFx0XHRxdWFudGl0eTogcm93LnF1YW50aXR5LFxuXHRcdFx0XHRcdFx0cHJpY2U6IHJvdy5wcmljZVxuXHRcdFx0XHRcdH1dXG5cdFx0XHRcdH1cblx0XHRcdF19KTtcblx0XHR9XG5cdH0pO1xufSk7XG5cblxuLy8gZnVuY3Rpb24gZm9ybWF0QnlEb2Mocm93LCBpbmRleCkge1xuLy8gXHRyZXN1bHQgPSB7XG5cdFx0XG4vLyBcdH07XG4vLyB9O1xuXG5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKFwiZm9ybWF0RGF0ZVwiLCBmdW5jdGlvbihkYXRlKSB7XG5cdGxldCByZXN1bHQgPSAnJztcblx0bGV0IGRhdGVPYmogPSBuZXcgRGF0ZShkYXRlKTtcblx0bGV0IG1vbnRoID0gZ2V0UnVzTW9udGgoZGF0ZU9iaik7XG5cdHJlc3VsdCArPSBkYXRlT2JqLmdldERhdGUoKTtcblx0cmVzdWx0ICs9ICcgJyArIG1vbnRoO1xuXG5cdGZ1bmN0aW9uIGdldFJ1c01vbnRoKGRhdGVPYmopIHtcblx0XHRcdGxldCBydXNNb250aHMgPSBbXG5cdFx0XHRcdCfQr9C90LLQsNGA0Y8nLFxuXHRcdFx0XHQn0KTQtdCy0YDQsNC70Y8nLFxuXHRcdFx0XHQn0JzQsNGA0YLQsCcsXG5cdFx0XHRcdCfQkNC/0YDQtdC70Y8nLFxuXHRcdFx0XHQn0JzQsNGPJyxcblx0XHRcdFx0J9CY0Y7QvdGPJyxcblx0XHRcdFx0J9CY0Y7Qu9GPJyxcblx0XHRcdFx0J9CQ0LLQs9GD0YHRgtCwJyxcblx0XHRcdFx0J9Ch0LXQvdGC0Y/QsdGA0Y8nLFxuXHRcdFx0XHQn0J7QutGC0Y/QsdGA0Y8nLFxuXHRcdFx0XHQn0J3QvtGP0LHRgNGPJyxcblx0XHRcdFx0J9CU0LXQutCw0LHRgNGPJyxcblx0XHRcdFx0J9Cv0L3QstCw0YDRjycsXG5cdFx0XHRcdCfQpNC10LLRgNCw0LvRjycsXG5cdFx0XHRcdCfQnNCw0YDRgtCwJ1xuXHRcdFx0XTtcblx0XHRyZXR1cm4gcnVzTW9udGhzW2RhdGVPYmouZ2V0TW9udGgoKV07XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn0pO1xuXG5cbkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoXCJjdXJyZW5jeUZvcm1hdFJ1XCIsIGZ1bmN0aW9uKG51bWJlcikge1xuXHRmdW5jdGlvbiB0b0ZpeGVkSWZGbG9hdChudW1iZXIsIGZpeGVkRGlnaXRzKSB7XG5cdFx0bGV0IHJlc3VsdDtcblx0XHRpZiAobnVtYmVyICUgMSAhPT0gMCkge1xuXHRcdFx0cmVzdWx0ID0gbnVtYmVyLnRvRml4ZWQoZml4ZWREaWdpdHMpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXN1bHQgPSBudW1iZXI7XG5cdFx0fVxuXHRcdHJldHVybiBTdHJpbmcocmVzdWx0KTtcblx0fVxuXHRyZXR1cm4gKFxuXHQgICAgdG9GaXhlZElmRmxvYXQobnVtYmVyLCAyKVxuXHQgICAgICAucmVwbGFjZSgnLicsICcsJylcblx0ICAgICAgLnJlcGxhY2UoLyhcXGQpKD89KFxcZHszfSkrKD8hXFxkKSkvZywgJyQxICcpICsgJyDigr0nXG5cdCAgKVxufSk7XG5cbkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoXCJNdWx0aXBseVR3b051bWJlcnNcIiwgZnVuY3Rpb24oYSwgYikge1xuXHRyZXR1cm4gYSAqIGI7XG59KTtcblxuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcImdldEltYWdlRGl2XCIsIGZ1bmN0aW9uKHBpYykge1xuICAgIGlmKHBpYykge1xuXHRcdFx0cmV0dXJuIG5ldyBIYW5kbGViYXJzLlNhZmVTdHJpbmcoXG5cdFx0XHRcdGA8ZGl2IGNsYXNzPVwicHJvZHVjdHMtbGlzdF9faW1nXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOnVybCgnJHtwaWN9JylcIj48L2Rpdj5gXG5cdFx0XHQgICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKFxuXHRcdFx0XHQnPGRpdiBjbGFzcz1cInByb2R1Y3RzLWxpc3RfX2ltZyBwcm9kdWN0cy1saXN0X19pbWctLW5vLXBpY1wiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTp1cmwoXFwnYXNzZXRzL2ltZy9ub19pbWFnZS5wbmdcXCcpXCI+PC9kaXY+J1xuXHRcdFx0KTtcblx0XHR9XG5cbn0pO1xuXG5cbmxldCBhcHBUZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHBUZW1wbGF0ZScpLmlubmVySFRNTDtcblxubGV0IGNvbXBpbGVkVGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoYXBwVGVtcGxhdGUpO1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FwcCcpLmlubmVySFRNTCA9IGNvbXBpbGVkVGVtcGxhdGUoe2RhdGE6ZmlsdGVyZWREYXRhfSk7XG5cblxuLy8gVUkgSmF2YVNjcmlwdFxuXG4vLyBTRVRJTkcgQ09MTEFQU0lORyBGT1IgRElGRkVSRU5UIERBVEVTXG5sZXQgZGF5SGVhZGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kb2NzLWhlYWQnKTtcbmRheUhlYWRlcnMuZm9yRWFjaCgoZWwpID0+IHtcblx0bGV0IGRvY0NvbnRlbnRzID0gZWwubmV4dEVsZW1lbnRTaWJsaW5nO1xuXHRpZighZWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2NvbGxhcHNlZCcpKSB7XG5cdFx0Y29sbGFwc2VEYXkoKTtcblx0fVxuXHRlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0dGhpcy5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ2NvbGxhcHNlZCcpO1xuXHRcdFx0Y29sbGFwc2VEYXkoKTtcblx0fSk7XG5cdGZ1bmN0aW9uIGNvbGxhcHNlRGF5KCkge1xuXHRcdGlmKGRvY0NvbnRlbnRzLnN0eWxlLm1heEhlaWdodCkge1xuXHRcdFx0ZG9jQ29udGVudHMuc3R5bGUubWF4SGVpZ2h0ID0gbnVsbDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZG9jQ29udGVudHMuc3R5bGUubWF4SGVpZ2h0ID0gZG9jQ29udGVudHMuc2Nyb2xsSGVpZ2h0ICsgJ3B4Jztcblx0XHR9XG5cdH1cblxufSk7XG5cblxuXG5cblxuLy8gU2V0dGluZyBjb2xsYXBzaW5nIGZvciBkaWZmZXJlbnQgZG9jc1xuLy8geW91IGNhbiBhZGQgYW4gdXBncmFkZSBsaWtlIGluIHRoZSBleGFtcGxlIGJlZm9yZSBzbyBkb2NzIGNhbiBiZSBcbi8vIHdpdGhvdXQgY29sbGFwc2VkIGNsYXNzIG9uIHN0YXJ0dXBcbmxldCBkb2N1bWVudEhlYWRlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZG9jdW1lbnQtaGVhZGVyJyk7XG5kb2N1bWVudEhlYWRlcnMuZm9yRWFjaChlbCA9PiB7XG5cdGxldCBkYXlMaXN0UGFyZW50ID0gZWwucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuXHRsZXQgZG9jQ29udGVudHMgPSBlbC5uZXh0RWxlbWVudFNpYmxpbmc7XG5cdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0ZWwuY2xhc3NMaXN0LnRvZ2dsZSgnY29sbGFwc2VkJyk7XG5cdFx0ZWwuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LnRvZ2dsZSgnYXJyb3ctLXVwJyk7XG5cdFx0aWYoZG9jQ29udGVudHMuc3R5bGUubWF4SGVpZ2h0KSB7XG5cdFx0XHRsZXQgY29tcHV0ZWRIZWlnaHQgPSBOdW1iZXIoZGF5TGlzdFBhcmVudC5zdHlsZS5tYXhIZWlnaHQucmVwbGFjZSgncHgnLCAnJykpXG5cdFx0XHQtIGRvY0NvbnRlbnRzLnNjcm9sbEhlaWdodCArICdweCc7XG5cdFx0XHQvL3VwYWR0aW5nIGRheS1saXN0IG1heCBoZWlnaHRcblx0XHRcdGRheUxpc3RQYXJlbnQuc3R5bGUubWF4SGVpZ2h0ID0gY29tcHV0ZWRIZWlnaHQ7XG5cdFx0XHRkb2NDb250ZW50cy5zdHlsZS5tYXhIZWlnaHQgPSBudWxsO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRsZXQgY29tcHV0ZWRIZWlnaHQgPSBOdW1iZXIoZGF5TGlzdFBhcmVudC5zdHlsZS5tYXhIZWlnaHQucmVwbGFjZSgncHgnLCAnJykpXG5cdFx0XHQrIGRvY0NvbnRlbnRzLnNjcm9sbEhlaWdodCArICdweCc7XG5cblx0XHRcdC8vdXBhZHRpbmcgZGF5LWxpc3QgbWF4IGhlaWdodFxuXHRcdFx0ZGF5TGlzdFBhcmVudC5zdHlsZS5tYXhIZWlnaHQgPSBjb21wdXRlZEhlaWdodDtcblxuXHRcdFx0Ly9naXZpbmcgbWF4IGhlaWdodCB0byBwcm9kdWNzdHMgbGlzdFxuXHRcdFx0ZG9jQ29udGVudHMuc3R5bGUubWF4SGVpZ2h0ID0gZG9jQ29udGVudHMuc2Nyb2xsSGVpZ2h0ICsgJ3B4Jztcblx0XHR9XG5cblx0fSk7XG5cblxuXG59KTtcblxuIl19
